<!DOCTYPE html>
<html>
<head>
  <title>Main map</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key={{ google_key }}&libraries=geometry"></script>
</head>
<body onload="initMap()">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <h1>Main map</h1>
        <p>Click on the map to add marker</p>
        <a href="#" onclick="clearAll()">clear markers</a>
        <br />

        <div id="distance">Total distance covered: <span id="distance-label">0</span> m</div>
        <div id="map" style="width:100%; height:500px;"></div>

        <div id="result"></div>
        <div id="direction" style="display:none">{{ url_for('directions') }}</div>
        <div id="weather" style="display:none">{{ url_for('weather') }}</div>

        <div>
          <h3>Points information</h3>
          <table id="point-info-table" class="table table-bordered table-sm table-hover">
            <thead class="thead-default">
              <tr>
                <th>Coordinate</th>
                <th>Temperature</th>
                <th>Humidity</th>
                <th>Weather</th>
                <th>Wind Speed</th>
                <th>Wind Direction</th>
              </tr>
            </thead>
            <tbody id="point-info-tbody">
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
  <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="//d3js.org/topojson.v1.min.js"></script>

  <script>
  d3.json("static/geojson/indo_prop.json", function(error, uk) {
    if (error) return console.error(error);

    console.log(uk);

    var projection = d3.geo.mercator()
      .scale(1500)
      .center([110.4,-2.61]);
    //  .scale(500);
    //   .translate([width / 2, height / 2]);

    // var projection = d3.geo.albers()
    //   .center([-2.11, 120.4])
    //   .rotate([4.4, 0])
    //   .parallels([50, 60])
    //   .scale(6000)
    //   .translate([width / 2, height / 2]);

    var path = d3.geo.path().projection(projection);

    svg.append("path")
      .datum(uk)
      .attr("d", path);

    svg.selectAll(".subunit")
      .data(uk.features)
      .enter().append("path")
      .attr("class", function(d) { return "subunit " + d.id; })
      .attr("d", path);
  });

  var width = "90vw",
    height = 480;

  var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

  </script>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
